# This workflow will install Python dependencies, run tests and lint with a single version of Python
# For more information see: https://help.github.com/actions/language-and-framework-guides/using-python-with-github-actions

name: ostap 

on:
  push:
    branches: [ test ]
  pull_request:
    branches: [ test ]
jobs:
  test_docker:
     runs-on: ubuntu-latest 
     steps:
      - uses: cvmfs-contrib/github-action-cvmfs@v2
      - name: Build
        run: |
         ls /cvmfs/sft.cern.ch 
         ls 
         docker  create -v  /osya --name ostap-build    gitlab-registry.cern.ch/lhcb-core/lbdocker/centos7-build:latest 
         docker cp  .  ostap-build:/osya
         docker run      -v /cvmfs:/cvmfs:shared -u:0  --volumes-from ostap-build -v "/home/runner/work/ostap/ostap":"/github/workspace" --security-opt seccomp=unconfined gitlab-registry.cern.ch/lhcb-core/lbdocker/centos7-build:latest /bin/bash -c "cd ..  && ls -al "
